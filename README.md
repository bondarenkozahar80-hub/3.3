# CommentTree ‚Äî –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å –ø–æ–∏—Å–∫–æ–º, –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

**CommentTree** ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π:
- –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—É—é –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤;
- —É–¥–∞–ª–µ–Ω–∏–µ —Ü–µ–ø–æ—á–µ–∫ —Å –ø–æ—Ç–æ–º–∫–∞–º–∏;
- –ø–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É;
- –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É;
- –ø—Ä–æ—Å—Ç–æ–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ HTML + JS –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
comment_tree/
‚îú‚îÄ‚îÄ cmd/
‚îÇ ‚îî‚îÄ‚îÄ main.go # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
‚îú‚îÄ‚îÄ internal/
‚îÇ ‚îú‚îÄ‚îÄ app/ # –õ–æ–≥–∏–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ ‚îú‚îÄ‚îÄ config/ # –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ ‚îú‚îÄ‚îÄ handlers/ # HTTP-—Ä–æ—É—Ç–µ—Ä—ã –∏ middleware
‚îÇ ‚îú‚îÄ‚îÄ middleware/ # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ CORS
‚îÇ ‚îú‚îÄ‚îÄ model/ # –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö (Comment)
‚îÇ ‚îú‚îÄ‚îÄ service/ # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π)
‚îÇ ‚îî‚îÄ‚îÄ storage/
‚îÇ ‚îú‚îÄ‚îÄ postgres/ # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è PostgreSQL
‚îÇ ‚îî‚îÄ‚îÄ storage.go # –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îú‚îÄ‚îÄ db/
‚îÇ ‚îî‚îÄ‚îÄ migrations/
‚îÇ ‚îú‚îÄ‚îÄ 000001_tables.up.sql # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã comments
‚îÇ ‚îî‚îÄ‚îÄ 000001_tables.down.sql # –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ web/
‚îÇ ‚îú‚îÄ‚îÄ index.html # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ ‚îú‚îÄ‚îÄ styles.css
‚îÇ ‚îî‚îÄ‚îÄ app.js
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ .env
‚îî‚îÄ‚îÄ README.md

```

```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

–°–µ—Ä–≤–∏—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç REST API —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –±–∞–∑–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏:

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----------|----------|
| `POST` | `/comments` | –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (—Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º `parent_id`) |
| `GET` | `/comments?parent={id}` | –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–µ–≤–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ |
| `GET` | `/comments?limit=10&offset=0` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π |
| `GET` | `/comments?search=—Ç–µ–∫—Å—Ç` | –ü–æ–∏—Å–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É |
| `DELETE` | `/comments/{id}` | –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –∏ –≤—Å–µ—Ö –µ–≥–æ –ø–æ—Ç–æ–º–∫–æ–≤ |

```

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Go 1.25
- PostgreSQL
- sqlx 
- gin / ginext 
- pgx
- dotenv / config loader
- Vanilla HTML + JS + CSS

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/Vladimirmoscow84/comment_tree.git
cd comment_tree

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env —Ñ–∞–π–ª

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
DATABASE_URI="postgres://user:password@localhost:5432/comment_tree?sslmode=disable"
SERVER_ADDRESS=":...."

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:
psql -U user -d comment_tree -f db/migrations/000001_tables.up.sql

–ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL —á–µ—Ä–µ–∑ Docker
docker run -d \
  --name pg-comment \
  -p 5440:5432 \
  -e POSTGRES_USER=vladimir \
  -e POSTGRES_PASSWORD="password" \
  -e POSTGRES_DB="comment_tree" \
  postgres:latest

–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é go run cmd/main.go

–£–±–µ–¥–∏—Ç—å—Å—è –≤ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—É—Å–∫–µ
[postgres] connect to DB successfully
[app] storage initialized successfully
Server started on :....

–û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ http://localhost:8080

–ü—Ä–∏–º–µ—Ä –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞


–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∫–æ—Ä–Ω–µ–≤–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É /.
–û–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
-–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ä–µ–≤–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
-–û—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
-–£–¥–∞–ª–µ–Ω–∏–µ —Ü–µ–ø–æ—á–µ–∫
-–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
-–°–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—é

API –ü—Ä–∏–º–µ—Ä—ã (Postman / curl)
–°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:
curl -X POST http://localhost:8080/comments \
  -H "Content-Type: application/json" \
  -d '{"parent_id": null, "content": "–ü–µ—Ä–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"}'

–ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ä–µ–≤–æ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è 1:
curl http://localhost:8080/comments?parent=1

–£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:
curl -X DELETE http://localhost:8080/comments/1

–ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É:
curl http://localhost:8080/comments?search=–ü—Ä–∏–≤–µ—Ç


–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –∫–∞–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ Go-—Å–µ—Ä–≤–∏—Å–∞ —Å PostgreSQL, REST API –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º UI –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤

–ê–≤—Ç–æ—Ä
–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: 
üìß –ö–æ–Ω—Ç–∞–∫—Ç: 
üì¶ GitHub: github.com/Vladimirmoscow84
